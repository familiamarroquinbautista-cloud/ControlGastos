<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>App Marsol</title>

<style>
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;
}

body{
  min-height:100vh;
  background:#f4f6f8;
  display:flex;
  justify-content:center;
  padding:40px 15px;
  transition:background 0.4s ease;
}

/* Fondo dinámico por perfil */
body.maria{
  background:
    linear-gradient(rgba(233, 30, 99, 0.04), rgba(233, 30, 99, 0.04)),
    #f4f6f8;
}

body.andres{
  background:
    linear-gradient(rgba(22, 42, 56, 0.08), rgba(22, 42, 56, 0.08)),
    #f4f6f8;
}

.container{
  width:100%;
  max-width:480px;
}

/* HEADER */
.header{
  margin-bottom:25px;
}

.header h2{
  font-weight:500;
  font-size:22px;
  color:#1e1e1e;
}

.header span{
  font-size:14px;
  color:#7f8c8d;
}

/* CARD SALDO */
.card{
  background:linear-gradient(135deg,#1e2a38,#2c3e50);
  color:white;
  padding:28px;
  border-radius:20px;
  margin-bottom:25px;
  box-shadow:0 10px 25px rgba(0,0,0,0.15);
  animation:fadeIn 0.6s ease;
}

.card h3{
  font-size:14px;
  font-weight:400;
  opacity:0.7;
  margin-bottom:8px;
}

.card .saldo{
  font-size:34px;
  font-weight:600;
  letter-spacing:1px;
}

/* FORM */
.form{
  background:white;
  padding:20px;
  border-radius:16px;
  margin-bottom:25px;
  box-shadow:0 8px 20px rgba(0,0,0,0.05);
}

.form input, .form select{
  width:100%;
  padding:12px;
  margin-bottom:12px;
  border-radius:10px;
  border:1px solid #e0e0e0;
  font-size:14px;
}

.form button{
  width:100%;
  padding:14px;
  border:none;
  border-radius:12px;
  background:#2c3e50;
  color:white;
  font-size:15px;
  cursor:pointer;
  transition:all 0.2s ease;
}

.form button:hover{
  opacity:0.9;
}

/* HISTORIAL */
.historial{
  background:white;
  padding:20px;
  border-radius:16px;
  box-shadow:0 8px 20px rgba(0,0,0,0.05);
}

.movimiento{
  display:flex;
  justify-content:space-between;
  padding:12px 0;
  border-bottom:1px solid #f0f0f0;
  font-size:14px;
}

.movimiento:last-child{
  border-bottom:none;
}

.movimiento span{
  font-weight:500;
}

.ingreso{ color:#27ae60; }
.gasto{ color:#c0392b; }

@keyframes fadeIn{
  from{opacity:0; transform:translateY(10px);}
  to{opacity:1; transform:translateY(0);}
}
</style>
</head>

<body>

<div class="container">

  <div class="header">
    <h2 id="tituloPerfil"></h2>
    <span>Control financiero personal</span>
  </div>

  <div class="card">
    <h3>Saldo disponible</h3>
    <div class="saldo" id="saldo">$0</div>
  </div>

  <div class="form">
    <input type="text" id="descripcion" placeholder="Descripción">
    <input type="number" id="monto" placeholder="Monto">
    <select id="tipo">
      <option value="ingreso">Ingreso</option>
      <option value="gasto">Gasto</option>
    </select>
    <button onclick="agregarMovimiento()">Registrar movimiento</button>
  </div>

  <div class="historial" id="historial"></div>

</div>

<script>
const perfil = sessionStorage.getItem("perfil");

if(!perfil){
  window.location.href="index.html";
}

document.getElementById("tituloPerfil").innerText = perfil;

/* Fondo dinámico */
if(perfil === "Maria"){
  document.body.classList.add("maria");
}
if(perfil === "Andres"){
  document.body.classList.add("andres");
}

let movimientos = JSON.parse(localStorage.getItem(perfil)) || [];

function formatearMoneda(valor){
  return "$" + valor.toLocaleString("es-CO");
}

function actualizarVista(){
  const historial = document.getElementById("historial");
  historial.innerHTML="";
  let saldo=0;

  movimientos.forEach(m=>{
    if(m.tipo==="ingreso"){
      saldo+=m.monto;
    }else{
      saldo-=m.monto;
    }

    historial.innerHTML += `
      <div class="movimiento">
        <div>${m.descripcion}</div>
        <span class="${m.tipo==='ingreso'?'ingreso':'gasto'}">
          ${m.tipo==='ingreso'?'+':'-'}${formatearMoneda(m.monto)}
        </span>
      </div>
    `;
  });

  document.getElementById("saldo").innerText=formatearMoneda(saldo);
}

function agregarMovimiento(){
  const descripcion=document.getElementById("descripcion").value.trim();
  const monto=parseFloat(document.getElementById("monto").value);
  const tipo=document.getElementById("tipo").value;

  if(!descripcion || isNaN(monto) || monto<=0){
    return;
  }

  movimientos.push({descripcion,monto,tipo});
  localStorage.setItem(perfil,JSON.stringify(movimientos));

  document.getElementById("descripcion").value="";
  document.getElementById("monto").value="";

  actualizarVista();
}

actualizarVista();
</script>

</body>
</html>